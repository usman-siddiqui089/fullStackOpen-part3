(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(n,e,t){},39:function(n,e,t){"use strict";t.r(e);var c=t(1),a=t(14),r=t.n(a),o=(t(19),t(3)),u=t(4),i=t.n(u),s="/api/persons",l=function(){return i.a.get(s).then((function(n){return n.data}))},d=function(n){return i.a.post(s,n).then((function(n){return n.data}))},f=function(n,e){return i.a.put("".concat(s,"/").concat(n),e).then((function(n){return n.data}))},j=function(n){return i.a.delete("".concat(s,"/").concat(n)).then((function(n){return n.data}))},b=t(0),h=function(n){var e=n.text;return Object(b.jsx)("h1",{children:e})},m=function(n){var e=n.id,t=n.name,c=n.phone,a=n.onClickHandler;return Object(b.jsxs)("p",{children:[t,"\xa0",c,"\xa0",Object(b.jsx)("button",{value:e,onClick:a,children:"Delete"})]})},O=function(n){var e=n.contacts,t=n.onClickHandler;return 0!==e.length?Object(b.jsx)(b.Fragment,{children:e.map((function(n){return Object(b.jsx)(m,{id:n.id,name:n.name,phone:n.number,onClickHandler:t},n.name)}))}):Object(b.jsx)("p",{children:"No contacts found in the Phonebook. Please add first."})},p=function(n){var e=n.currentVal,t=n.onChangeHandler;return Object(b.jsxs)(b.Fragment,{children:["Search Contacts: ",Object(b.jsx)("input",{value:e,onChange:t})]})},v=function(n){var e=n.onSubmitHandler,t=n.nameVal,c=n.phoneVal,a=n.onChangeName,r=n.onChangePhone;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("form",{onSubmit:e,children:[Object(b.jsxs)("div",{children:["Enter Name: ",Object(b.jsx)("input",{value:t,onChange:a}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),"Enter Phone: ",Object(b.jsx)("input",{value:c,onChange:r})]}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{type:"submit",children:"Save Contact"})]})})},x=function(n){var e=n.showData;return Object(b.jsx)(b.Fragment,{children:e})},g=function(n){var e=n.message,t=n.type;return null===e?null:"success"===t?Object(b.jsx)("div",{className:"success",children:e}):Object(b.jsx)("div",{className:"error",children:e})},C=function(){var n=Object(c.useState)([]),e=Object(o.a)(n,2),t=e[0],a=e[1],r=Object(c.useState)(""),u=Object(o.a)(r,2),i=u[0],s=u[1],m=Object(c.useState)(""),C=Object(o.a)(m,2),k=C[0],w=C[1],y=Object(c.useState)(""),S=Object(o.a)(y,2),H=S[0],P=S[1],N=Object(c.useState)({type:null,content:null}),V=Object(o.a)(N,2),D=V[0],F=V[1];Object(c.useEffect)((function(){l().then((function(n){a(n)}))}),[]);var E=function(n,e){F({type:n,content:e}),setTimeout((function(){F({type:null,content:null})}),5e3)},I=function(n){var e={name:i,number:k};f(n,e).then((function(e){a(t.map((function(t){return t.id!==n?t:e}))),s(""),w("")})).then((function(){var n="Modified ".concat(e.name," successfully.");E("success",n)}))},J=function(n){var e=n.target.value,c=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(c.name,"?"))&&j(e).then((function(){a(t.filter((function(n){return n.id!==e})))})).then((function(){var n="'".concat(c.name,"' deleted successfully.");E("success",n)})).catch((function(){var n="Information of '".concat(c.name,"' has already been removed from the phonebook");E("error",n)}))};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(h,{text:"Phonebook"}),Object(b.jsx)(g,{type:D.type,message:D.content}),Object(b.jsx)(p,{currentVal:H,onChangeHandler:function(n){P(n.target.value)}}),Object(b.jsx)(h,{text:"Add new contact"}),Object(b.jsx)(v,{onSubmitHandler:function(n){n.preventDefault();var e=t.find((function(n){return n.name===i&&n.number===k})),c=t.find((function(n){return n.name!==i&&n.number===k})),r=t.find((function(n){return n.name===i&&n.number!==k}));if(e){E("error","This person name and phone is already present in phonebook. Please try new.")}else if(c){if(window.confirm("'".concat(k,"' is already added to phonebook, replace the old name with a new name?"))){var o=t.find((function(n){return n.number===k}));I(o.id)}}else if(r){if(window.confirm("'".concat(i,"' is already added to phonebook, replace the old number with a new number?"))){var u=t.find((function(n){return n.name===i}));I(u.id)}}else{var l={name:i,number:k};d(l).then((function(n){a(t.concat(n)),s(""),w("")})).then((function(){var n="'".concat(l.name,"' added successfully to Phonebook.");E("success",n)})).catch((function(n){var e=n.response.data;E("error",e)}))}},nameVal:i,phoneVal:k,onChangeName:function(n){s(n.target.value)},onChangePhone:function(n){w(n.target.value)}}),Object(b.jsx)(h,{text:"Contacts"}),Object(b.jsx)(x,{showData:function(){if(""!==H){var n=t.filter((function(n){return n.name.toLowerCase().includes(H)||n.number.includes(H)}));return 0!==n.length?Object(b.jsx)(O,{contacts:n,onClickHandler:J}):Object(b.jsx)("p",{children:"Sorry! No contact found"})}return Object(b.jsx)(O,{contacts:t,onClickHandler:J})}()})]})};r.a.render(Object(b.jsx)(C,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.899e9120.chunk.js.map